---
date: 2019-07-17
title: Factory
description: The interface to create an object
categories:
  - patterns
type: Document
set: design-pattern
set_order: 3
---

构造函数对一个对象初始化进行了具体的描述。
这时候，如果该对象职责清晰简洁，初始化起来方便简捷，那么初始化起来应该也难不到哪儿去。
如果该对象责任重大，光初始化的过程就得经过好几步，甚至还需要提前初始化好其它的对象，那就会受到来自灵魂的拷问 - 
是机器为我工作，还是我为机器工作？（Thanks to [Matsumoto](https://en.wikipedia.org/wiki/Ruby_(programming_language))）

**无论如何，我都得知道如何去初始化，而且初始化得越多，所产生的重复代码也就越多。**

既然是面向对象，面对Object的live or die，我们得用程序员的方式，以示尊重。
工场模式是一种很体面的方式，用来迎接一个个崭新的对象，封装了初始化的复杂度，让调用者很方便的创建自己需要的对象，并让对象的创建过程中
重复的代码最小化。


## 场景
* 将创建对象的职责代理给第三方
* 由子类根据自身的特性创建对象
* 会根据不同情况动态创建类似的对象

## 框架
## 优点与不足

## 示例代码
~~~python
def create_api_gw(formatter="yaml", data=None):
    """Factory"""
    api_gw_builder = {
        "yaml": lambda yaml_data: ApiGWJsonBuilder(yaml.safe_load(yaml_data)),
        "json": lambda json_data: ApiGWJsonBuilder(json_data)
    }

    builder = api_gw_builder[formatter](data)
    api_gw = builder.with_version().with_metadata().with_route_specification()

    return api_gw
~~~