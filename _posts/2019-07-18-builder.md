---
date: 2019-07-18
title: Builder
description: Separate the construction of a complex object, so that the same construction can create different representations
categories:
  - patterns
type: Document
set: design-pattern
set_order: 4
---

丰田大法好就好在控制在制品数量，消除浪费，提前识别瓶颈和风险。同一套生产线，可以按需装配出不同的车型。
Builder模式就是按需组装复杂对象，并让这个流程易于理解，更贴进实际情况。不然就需要创建者对构造条件有足够的理解，并明白自己需要的是哪些，
哪些不需要，并保证创建过程中上下文齐全。


## 场景
## 框架
## 优点与不足

## 示例代码
```python
class ApiGWJsonBuilder(ApiGWBuilder):
    """Builder"""
    def __init__(self, data):
        self.yaml_source = data
        self.version = None
        self.metadata = None
        self.route_specification = None

    def with_version(self):
        return self

    def with_metadata(self):
        return self

    def with_route_specification(self):
        return self

    def build(self):
        return self


def create_api_gw(formatter="yaml", data=None):
    """Factory"""
    api_gw_builder = {
        "yaml": lambda yaml_data: ApiGWJsonBuilder(yaml.safe_load(yaml_data)),
        "json": lambda json_data: ApiGWJsonBuilder(json_data)
    }

    builder = api_gw_builder[formatter](data)
    api_gw = builder.with_version().with_metadata().with_route_specification()

    return api_gw
```